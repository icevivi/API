# 第五章 发布 - 表单发布和运行时环境

用 biForm 开发的表单，需要发布给最终用户。biForm 提供了简单方便的发布和升级方案。

---

<h2 id="category">目录</h2>

- [如何发布开发好的程序](#如何发布开发好的程序)
 - [1. 免编译](#_1-免编译)
 - [2. 一次开发，多平台运行](#_2-一次开发，多平台运行)
 - [3. 跨数据库](#_3-跨数据库)
- [PFF运行时环境](#PFF运行时环境)
- [PFF运行时环境的升级](#PFF运行时环境的升级)
- [开发自己的PFF运行时环境](#开发自己的PFF运行时环境)

---

## 如何发布开发好的程序

biForm 开发的程序是每个表单单独打包成 PFF 文件发布给最终用户的。PFF是 Portable Form File 的缩写，是我们公司自已设计的一种文件格式。

biForm 的设计目标是创建高内聚低耦合的应用程序框架，希望开发者在开发某个表单时，尽量符合这个原则。

biForm 下应用的发布有以下几个特点：

### 1. 免编译

biForm 开发的程序是以XML定义图形界面，以 Python 为编程语言的。所以打包发布并不需要进行编译的过程，是完全免编译的，因此发布过程也非常快速。

### 2. 一次开发，多平台运行

也正因为PFF独特的技术架构，PFF的发布完全跨平台的。

这种跨平台体现在以下几个方面：

- 在一种操作系统上开发的PFF，在其它操作系统环境下都可以使用。比如开发者可以使用 Windows 平台上的 biForm 进行开发，开发完成的 PFF 文件，在 Linux 平台上也可以使用，只要相应的 Linux 平台下有 PFF 运行时环境（比如 biReader ）就可以了。

- 因为免编译，所以PFF的应用发布也是跨CPU架构的。使用 x86_64 的电脑开发的应用程序，可以直接在其它CPU架构的机器上运行。目前 biForm 和 biReader 都已发布了支持 mips64el 、AMD、ARM 等CPU的操作系统上的版本。

### 3. 跨数据库

biForm 提供了跨数据库的开发接口。开发者如果在程序代码中没有使用某种特定的RDBMS的SQL语句，所开发的PFF文件可以跨数据库使用。如果需要使用一些特殊的SQL语句，也可以在代码中按所用的数据库类型进行分别处理来解决跨数据库的问题。

目前我们对外发布的版本支持 MSSQL、PostgreSQL、SQLite等数据库，也针对定制客户支持 Sybase、Oracle 等数据库。使用我们的数据库开发接口，就可以很方便地开发出可以跨数据库运行的应用程序。

综上，PFF 是一种真正的 “一次开发、多平台运行”的应用解决方案。

## PFF运行时环境

[返回目录](#category)

PFF文件只能在支持PFF文件格式的应用程序中运行，这类应用程序，我们统一称之为**PFF运行时环境**。比如我们公司发布的 biReader 就是一个通用的PFF运行时环境。我们也会发布一些行业应用软件，比如“工资核算管理系统”，它有单独的安装程序和安装目录，也是一个PFF运行时环境。

从技术角度上讲，PFF文件在所有包含PFF运行时引擎的应用程序中都能使用。但因为各个PFF运行时环境的开发者，也许会在程序中增加一些个性化的处理。所以，具体某个PFF运行时环境是否允许这个PFF文件在其环境中运行，需要参考各个PFF运行时环境的技术解决方案。


## 运行时环境的升级

[返回目录](#category)

biReader 有自动升级和手动升级的功能。其它的PFF运行时环境，视开发者提供的功能而定。

通过 UOS 或 Deepin 的应用商店发布的版本，一般不会带自动升级功能，需通过应用商店进行升级。

PFF运行时环境的升级，通常不会对用户正在使用的PFF进行升级，只对应用程序的可执行程序、依赖的库和其它文件等进行升级。都会遵循向下兼容的原则，保障旧版本的PFF仍旧可以正常使用。

## 开发自己的PFF运行时环境

[返回目录](#category)

biReader 是我们发布的通用的PFF运行时环境。有时您可能希望发布自己的应用程序，或者在自己的应用程序中使用 PFF 做为扩展组件，这些情况，就需要开发自己的PFF运行时环境。

我们提供了以下两种途径满足这两类需求：

1. 发布自己的PFF运行时环境

这种情况适用于您采用PFF开发了一个应用程序，但希望这些PFF不是在 biReader 中运行，而是有自己的启动画面、LOGO、应用程序的名称、不同的主窗口菜单。这类情况，您其实需要的是一个定制版的 biReader 。我们除了发布的社区免费版的 biReader 之外，还将发布适用于商业用户的企业版 biReader。企业版 biReader 可以通过配置文件，改变 biReader 的启动画面、LOGO、应用程序名称等。如果这个版本的 biReader 的定制化还不能符合您的需求，您也可以联系我们对 biReader 进行深度定制化。

2. 在原有应用中引入PFF做为插件框架

因为PFF易于开发、易于发布、且即插即用的特性，它很适合为其它应用程序提供插件框架。我们也已经在其它应用程序中使用了PFF做为扩展组件（也即插件）投入了商业应用。

但前提条件是，您原有的应用也是使用 Qt 开发的。我们会提供 PFF 运行时引擎需要的库和开发接口，在您的程序中调用，就可以实现一个使用PFF的插件框架了。
